(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1379c5a3"],{"1da7":function(e,t,n){"use strict";n("b5b4")},3017:function(e,t,n){"use strict";n("9006")},"57be":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reasoning-container"},[n("div",{staticClass:"top-box"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.openDialog}},[e._v("创建推理端点")])],1),n("div",{staticClass:"bottom-box"},[n("el-table",{staticStyle:{width:"100%"},attrs:{height:"100%",header:"",data:e.tableData}},[n("el-table-column",{attrs:{align:"center",prop:"name",label:"名称",width:"180"}}),n("el-table-column",{attrs:{align:"center",prop:"status",label:"状态",width:"180"}}),n("el-table-column",{attrs:{align:"center",prop:"createTime",label:"创建时间"}}),n("el-table-column",{attrs:{align:"center",prop:"trafficPercent",label:"流量百分比"}}),n("el-table-column",{attrs:{align:"center",prop:"url",label:"访问地址"}}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.handleClick(t.row)}}},[e._v("推理")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.del(t.row)}}},[e._v("删除")])]}}])})],1)],1),n("el-dialog",{staticClass:"reasoning-dialog",attrs:{title:"创建推理端点",visible:e.dialogFormVisible,top:"20vh","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[e.dialogFormVisible?n("ReasoningForm",{ref:"reasoningForm",attrs:{modelList:e.modelList}}):e._e(),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确定")])],1)],1),n("el-dialog",{attrs:{title:"推理",visible:e.chatBoxVisible,width:"60%",top:"10vh","close-on-click-modal":!1},on:{"update:visible":function(t){e.chatBoxVisible=t}}},[e.chatBoxVisible?n("ChartBox",{ref:"chartBox",attrs:{endpointName:e.endpointName}}):e._e()],1)],1)},o=[],a=(n("b0c0"),n("d3b7"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",staticClass:"experiment-form",attrs:{model:e.form,rules:e.rules,"label-width":"100px","label-position":"top"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"模型仓库",prop:"experimentName"}},[n("el-select",{attrs:{placeholder:"请选择模型仓库"},model:{value:e.form.experimentName,callback:function(t){e.$set(e.form,"experimentName",t)},expression:"form.experimentName"}},e._l(e.modelList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"端点名称",prop:"endpointName"}},[n("el-input",{model:{value:e.form.endpointName,callback:function(t){e.$set(e.form,"endpointName",t)},expression:"form.endpointName"}})],1)],1)],1)],1)}),r=[],s={props:{modelList:{type:Array,default:function(){return[]}}},data:function(){return{formLabelWidth:"120px",form:{experimentName:"",endpointName:""},rules:{experimentName:[{required:!0,message:"请选择模型仓库",trigger:"blur"}],endpointName:[{required:!0,message:"请输入端点名称",trigger:"change"}]}}},created:function(){},methods:{suggest:function(){}}},c=s,l=(n("1da7"),n("2877")),u=Object(l["a"])(c,a,r,!1,null,null,null),m=u.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-container"},[n("el-scrollbar",{staticStyle:{height:"300px"}},[n("div",{staticClass:"chat-messages"},e._l(e.messages,(function(t,i){return n("div",{key:i,staticClass:"message-item"},[t.isImage?n("img",{staticClass:"message-image",attrs:{src:t.content,alt:"Chat Image"}}):n("div",{staticClass:"message-text"},[e._v(" "+e._s(t.content)+" ")])])})),0)]),n("div",{staticClass:"chat-input"},[n("el-input",{attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)}},model:{value:e.instances,callback:function(t){e.instances=t},expression:"instances"}}),n("el-button",{attrs:{icon:"el-icon-message"},on:{click:e.sendMessage}},[e._v("发送")]),n("el-upload",{attrs:{action:"","on-change":e.getFile,limit:1,"list-type":"picture","show-file-list":!1}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1)},d=[],p=(n("b64b"),n("bc3a")),g=n.n(p),h=n("5c96"),v=n("a18c"),b=g.a.create({headers:{"Cache-Control":"no-cache"}}),w="/tl_proxy";function x(e,t){return new Promise((function(n,i){b.get(w+e,{params:t}).then((function(e){n(e)})).catch((function(e){i(e)}))}))}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,i){b.post(w+e,t).then((function(e){n(e)})).catch((function(e){i(e)}))}))}function k(e,t){return new Promise((function(n,i){b.delete(w+e+"/"+t).then((function(e){n(e)})).catch((function(e){i(e)}))}))}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x("/api/v1/automl/inference-service/overview",e)}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y("/api/v1/automl/deploy",e)}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y("/api/v1/automl/infer",e)}function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return k("/api/v1/automl/undeploy",e)}b.interceptors.request.use((function(e){var t=JSON.parse(localStorage.getItem("userInfo")),n="";return t||(n=localStorage.getItem("urlToken")),window.g.openCancelRequest&&window._axiosQueue&&(e.cancelToken=new g.a.CancelToken((function(e){window._axiosQueue.push({cancel:e})}))),e.url.indexOf("/api/user/login")<0&&t?e.headers.token=t.token:e.url.indexOf("logintest")>-1&&n&&(e.headers.token=n),e}),(function(e){return Promise.reject(e)})),b.interceptors.response.use((function(e){return e.data}),(function(e){return e.message.indexOf("401")>-1&&v["a"].push("/"),"请求取消"!==e.message?(Object(h["Message"])({message:e.message,type:"error"}),Promise.reject(e)):"请求取消"==e.message?Promise.reject(e):void 0}));var O={props:{endpointName:{type:String,default:""}},data:function(){return{messages:[],instances:null}},methods:{getFile:function(e,t){var n=this;this.getBase64(e.raw).then((function(e){console.log(e,"base64 字符串");var t=e.split(",");console.log("🚀 ~ this.getBase64 ~ arr:",t),n.instances='"'.concat(t[1],'"'),console.log("🚀 ~ this.getBase64 ~ this.instances:",n.instances)}))},getBase64:function(e){return new Promise((function(t,n){var i=new FileReader,o="";i.readAsDataURL(e),i.onload=function(){o=i.result},i.onerror=function(e){n(e)},i.onloadend=function(){t(o)}}))},sendMessage:function(){var e=this;console.log(this.instances,"this.instances----------------");var t={instances:JSON.parse("[[".concat(this.instances,"]]")),endpointName:this.endpointName};N(t).then((function(t){e.messages.push({content:t.data,isImage:!1})})),this.instances=""},handleImageUpload:function(e,t){var n=e.url;this.messages.push({content:n,isImage:!0})}}},B=O,P=(n("3017"),Object(l["a"])(B,f,d,!1,null,"1d23a9e2",null)),V=P.exports,$=n("c114"),j={components:{ReasoningForm:m,ChartBox:V},data:function(){return{dialogFormVisible:!1,chatBoxVisible:!1,tableData:[],modelList:[],endpointName:""}},created:function(){this.init()},methods:{init:function(){this.getOverview(),this.getSelect()},getOverview:function(){var e=this;C().then((function(t){console.log("🚀 ~ overview ~  this.tableData:",e.tableData)}))},getSelect:function(){var e=this;Object($["e"])().then((function(t){t.models.forEach((function(t,n){e.modelList.push({value:t,label:t})})),console.log("🚀 ~ getSelect ~ this.modelList",e.modelList)}))},handleClick:function(e){console.log(e),this.endpointName=e.name,this.chatBoxVisible=!0},openDialog:function(){this.dialogFormVisible=!0},info:function(e){this.$router.push("/reasoning/detail")},del:function(e){var t=this;console.log("🚀 ~ del ~ row:",e),this.$confirm("确认要删除该任务吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n=e.name;F(n).then((function(e){console.log("🚀 ~ del ~ res",e),200===e.code&&(t.getOverview(),t.$message({type:"success",message:"删除成功!"}))}))})).catch((function(){}))},submitForm:function(e){var t=this;this.$refs.reasoningForm.$refs.form.validate((function(e){if(!e)return!1;var n=t.$refs.reasoningForm.form;_(n).then((function(e){console.log("🚀 ~ submitForm ~ res",e),200===e.code&&(t.$message({type:"success",message:"创建成功!"}),t.dialogFormVisible=!1,t.getOverview())}))}))}}},S=j,L=(n("59fa"),Object(l["a"])(S,i,o,!1,null,null,null));t["default"]=L.exports},"59fa":function(e,t,n){"use strict";n("752d")},"752d":function(e,t,n){},9006:function(e,t,n){},b5b4:function(e,t,n){},c114:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return g})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return v})),n.d(t,"d",(function(){return b}));n("d3b7");var i=n("bc3a"),o=n.n(i),a=n("5c96"),r=n("a18c"),s=o.a.create({headers:{"Cache-Control":"no-cache"}}),c="/proxy";function l(e,t){return new Promise((function(n,i){s.get(c+e,{params:t}).then((function(e){n(e)})).catch((function(e){i(e)}))}))}function u(e,t){return new Promise((function(n,i){s.get(c+e+"/"+t).then((function(e){n(e)})).catch((function(e){i(e)}))}))}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,i){s.post(c+e,t).then((function(e){n(e)})).catch((function(e){i(e)}))}))}function f(e,t){return new Promise((function(n,i){s.delete(c+e+"/"+t).then((function(e){n(e)})).catch((function(e){i(e)}))}))}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m("/api/v1/experiment",e)}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l("/api/v1/experiment/cards",e)}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m("/api/v1/selection/candidate-models",e)}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return u("/api/v1/experiment/overview",e)}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l("/api/v1/repository/model",e)}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f("/api/v1/experiment",e)}s.interceptors.response.use((function(e){return e.data}),(function(e){return e.message.indexOf("401")>-1&&r["a"].push("/"),"请求取消"!==e.message?(Object(a["Message"])({message:e.message,type:"error"}),Promise.reject(e)):"请求取消"==e.message?Promise.reject(e):void 0}))}}]);